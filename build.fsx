// --------------------------------------------------------------------------------------
// FAKE build script
// --------------------------------------------------------------------------------------

#r "./packages/FAKE/tools/FakeLib.dll"

open Fake

// --------------------------------------------------------------------------------------
// Build variables
// --------------------------------------------------------------------------------------

let buildDir  = "./build/"

// --------------------------------------------------------------------------------------
// Targets
// --------------------------------------------------------------------------------------

Target "Clean" (fun _ ->
    CleanDir buildDir
)

Target "Build" (fun _ ->
    let result = Shell.Exec("dotnet", "msbuild /property:OutDir=../build Arango.Confab.fsproj", "./Arango.Confab/")
    if result <> 0 then failwithf "Arango.Confab failed to compile with exit code %d" result
)

// --------------------------------------------------------------------------------------
// Build order
// --------------------------------------------------------------------------------------

"Clean"
    ==> "Build"

RunTargetOrDefault "Build"